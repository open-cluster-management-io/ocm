# Demonstrates the new aggregate ClusterRole feature for addon-manager.
# Instead of creating a Role and RoleBinding to grant addon-manager access to secrets,
# we now create a ClusterRole with the aggregate label and it will automatically
# be aggregated to the addon-manager's permissions.
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: get-customer-ca
  labels:
    # This label makes this ClusterRole aggregate to the addon-manager
    open-cluster-management.io/aggregate-to-addon-manager: "true"
rules:
- apiGroups:
    - ""
  resources:
    - secrets
  verbs:
    - get
    - list
    - watch
  resourceNames:
    - << CustomSignerSecretName >>
